@page "/charts"
@using System.Net.Http
@using System.Net.Http.Json
@using System.Threading.Tasks 
@using Syncfusion.Blazor.Charts
@using Syncfusion.Blazor.Data 
@using BapBlazor.Data
@using Newtonsoft.Json 


@inject HttpClient client

<SfChart>
    
    <ChartPrimaryXAxis ValueType="Syncfusion.Blazor.Charts.ValueType.Category" />
    <ChartSeriesCollection>
        <ChartSeries DataSource="@StoreApps" XName="Category" YName="People" Type="ChartSeriesType.Column" />
    </ChartSeriesCollection>
</SfChart>

@code {


        string responseBody = "";
        List<StoreApp> StoreApps = new List<StoreApp>();

    protected override async Task OnInitializedAsync()
    {
        var apiName = "api/StoreApps";
        var httpResponse = await client.GetAsync(apiName);

        if (httpResponse.IsSuccessStatusCode)
        {
            responseBody = await httpResponse.Content.ReadAsStringAsync();
            StoreApps = JsonConvert.DeserializeObject<List<StoreApp>>(responseBody);
            StateHasChanged();
        }

    }

    

  

}


